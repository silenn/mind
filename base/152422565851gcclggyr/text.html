<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'Georgia'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Дополнение 1: сборка примеров</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Дополнение 2: демонстрационные приложения (демо)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Дополнение 3: папки и файлы FreeRTOS</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Структура папок, описанная в этом Дополнении, относится только к файлу .zip, который можно загрузить с WEB-сайта FreeRTOS.org. Примеры, которые предоставлены с этой книгой, используют немного другую организацию.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Система FreeRTOS, загруженная как один файл .zip, содержит:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">· Исходный код FreeRTOS. Этот код общий для всех портов FreeRTOS.<br />· Слой порта для каждой поддерживаемой комбинации микроконтроллера и компилятора.<br />· Файл проекта или makefile для сборки демо-приложения для каждой поддерживаемой комбинации микроконтроллера и компилятора.<br />· Набор демонстрационных задач, которые являются общими для всех демо-приложений. К этим демонстрационным задачам есть ссылки их демо-проектов, специфичных для отдельного порта FreeRTOS.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Файл .zip имеет две директории верхнего уровня под именами Source и Demo. Дерево директорий папки Source содержит всю реализацию ядра FreeRTOS - как общие компоненты, так и компоненты, специфические для каждого порта. Дерево директорий папки Demo содержит только проекты демо-приложений и файлы исходного кода, которые реализуют демонстрационные задачи.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'courier new,courier'; font-weight:600;">FreeRTOS</span><span style=" font-family:'courier new,courier';"><br />   ¦<br />   +- </span><span style=" font-family:'courier new,courier'; font-weight:600;">Demo</span><span style=" font-family:'courier new,courier';"> (исходный код демо-приложений и проекты)<br />   ¦<br />   +- </span><span style=" font-family:'courier new,courier'; font-weight:600;">Source</span><span style=" font-family:'courier new,courier';"> (реализация ядра реального времени)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Рис. 45. Директории верхнего уровня - Source (исходный код) и Demo (демонстрационные приложения и задачи)</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Исходный код ядра FreeRTOS содержится только в трех C-файлах, которые являются общими для всех портов микроконтроллеров. Они называются queue.c, tasks.c и list.c, и находятся прямо в папке Source. Файлы, специфичные для определенного порта, находятся в дереве папки Portable, которая также расположена в папке Source.</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Четвертый опциональный файл исходного кода под названием croutine.c реализует функционал дополнительных подпрограмм FreeRTOS. Он должен быть подключен по необходимости в сборки, если эти дополнительные подпрограммы используются.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'courier new,courier'; font-weight:600;">FreeRTOS</span><span style=" font-family:'courier new,courier';"><br />   ¦<br />   +- </span><span style=" font-family:'courier new,courier'; font-weight:600;">Demo</span><span style=" font-family:'courier new,courier';"> (исходный код демо-приложений и проекты)<br />   ¦<br />   +- </span><span style=" font-family:'courier new,courier'; font-weight:600;">Source</span><span style=" font-family:'courier new,courier';"> (реализация ядра реального времени)<br />   ¦<br />   +- </span><span style=" font-family:'courier new,courier'; font-weight:600;">tasks.c</span><span style=" font-family:'courier new,courier';"> (один из трех файлов ядра)<br />   +- </span><span style=" font-family:'courier new,courier'; font-weight:600;">queue.c</span><span style=" font-family:'courier new,courier';"> (один из трех файлов ядра)<br />   +- </span><span style=" font-family:'courier new,courier'; font-weight:600;">list.c</span><span style=" font-family:'courier new,courier';"> (один из трех файлов ядра)<br />   +- </span><span style=" font-family:'courier new,courier'; font-weight:600;">portable</span><span style=" font-family:'courier new,courier';"> (подкаталог для всех специфичных для порта файлов)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Рис. 46. Основное дерево файлов, на котором реализовано ядро FreeRTOS</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Удаление неиспользуемых файлов</span>. Главный файл .zip пакета FreeRTOS включает файлы для всех портов и всех демо-приложений, так что он содержит намного больше файлов, чем требуется для использования только одного порта. Используемый проект демо-приложения или makefile, сопровождающие порт, могут быть использованы как ссылка на файлы, которые нужны, и может позволить определить, какие файлы можно удалить.</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Слой портирования - это код части FreeRTOS, относящийся к отдельной комбинации компилятора и архитектуры микроконтроллера. Файлы исходного кода слоя портирования размещены в папке FreeRTOS\Source\Portable\[compiler]\[architecture], где [compiler] - используемый набор средств проектирования (tool chain), и [architecture] - вариант используемого микроконтроллера.</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">· Все поддиректории в папке FreeRTOS\Source\Portable, которые не относятся к используемому компилятору, могут быть удалены, за исключением папки FreeRTOS\Source\Portable\MemMang.<br />· Все поддиректории в папке FreeRTOS\Source\Portable\[compiler], которые не относятся к используемому варианту микроконтроллера, может быть удалены.<br />· Все поддиректории в папке FreeRTOS\Demo, которые не относятся к используемому варианту демо-приложения, могут быть удалены, за исключением папки FreeRTOS\Demo\Common, которая содержит файлы используемые из всех демо-приложений.</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Папка FreeRTOS\Demo\Common содержит намного больше файлов, чем те, которые используются только из одного демо-приложения, поэтому содержимое этой папки также может быть подчищено, если это необходимо.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Дополнение 4: создание проекта FreeRTOS</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Адаптирование под приложение одного из предложенных демо-проектов</span>. Каждый официальный порт FreeRTOS поставляется с предварительно сконфигурированными демо-приложениями, которые должны быть собраны без каких-либо ошибок или предупреждений компилятора (см. Дополнение 2). Новые проекты рекомендуется создавать, адаптируя один из этих существующих проектов. Таким способом можно получить проект, включающий корректный набор файлов и установок компилятора.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чтобы начать новое приложение из существующего демо-проекта, нужно:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">1</span>. Открыть предоставленный демо-проект, и убедиться, что он нормально компилируется и выполняется, как и ожидалось.<br /><span style=" font-weight:600;">2</span>. Выбросите неиспользуемые файлы исходного кода, которые содержат демонстрационные задачи. Любой из файлов, находящийся в дереве папок Demo\Common, может быть удален из проекта или makefile.<br /><span style=" font-weight:600;">3</span>. Удалите все функции в файле main.c, кроме prvSetupHardware().<br /><span style=" font-weight:600;">4</span>. Проверьте, что все макро-константы configUSE_IDLE_HOOK, configUSE_TICK_HOOK и configCHECK_FOR_STACK_OVERFLOW файла FreeRTOSConfig.h установлены в 0. Это устранит поиск линкером всех функций хука. Функции хука могут быть при необходимости добавлены позже.<br /><span style=" font-weight:600;">5</span>. Создайте новую функцию main() по шаблону, показанному в листинге 77.<br /><span style=" font-weight:600;">6</span>. Проверьте, что проект все еще компилируются.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Выполнение этих шагов предоставит проект, который включает все файлы исходного кода FreeRTOS, но не задает никакой функциональности.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:10pt; color:#0000ff;">int</span><span style=" font-family:'Courier New'; font-size:10pt; color:#000000;"> main( </span><span style=" font-family:'Courier New'; font-size:10pt; color:#0000ff;">void</span><span style=" font-family:'Courier New'; font-size:10pt; color:#000000;"> )<br />{<br />  </span><span style=" font-family:'Courier New'; font-size:10pt; color:#008000;">/* Выполните любую необходимую настройку аппаратуры. */</span><span style=" font-family:'Courier New'; font-size:10pt; color:#000000;"><br />  prvSetupHardware();<br /> <br />  </span><span style=" font-family:'Courier New'; font-size:10pt; color:#008000;">/* --- ЗДЕСЬ МОГУТ БЫТЬ СОЗДАНЫ ЗАДАЧИ ПРИЛОЖЕНИЯ --- */</span><span style=" font-family:'Courier New'; font-size:10pt; color:#000000;"><br /> <br />  </span><span style=" font-family:'Courier New'; font-size:10pt; color:#008000;">/* Запуск на выполнение созданных задач. */</span><span style=" font-family:'Courier New'; font-size:10pt; color:#000000;"><br />  vTaskStartScheduler();<br /> <br />  </span><span style=" font-family:'Courier New'; font-size:10pt; color:#008000;">/* Выполнение дойдет до этого места только тогда, когда</span><span style=" font-family:'Courier New'; font-size:10pt; color:#000000;"><br /></span><span style=" font-family:'Courier New'; font-size:10pt; color:#008000;">     недостаточно памяти в куче для старта шедулера. */</span><span style=" font-family:'Courier New'; font-size:10pt; color:#000000;"><br />  </span><span style=" font-family:'Courier New'; font-size:10pt; color:#0000ff;">for</span><span style=" font-family:'Courier New'; font-size:10pt; color:#000000;">( ;; );<br />  </span><span style=" font-family:'Courier New'; font-size:10pt; color:#0000ff;">return</span><span style=" font-family:'Courier New'; font-size:10pt; color:#000000;"> 0;<br />}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Создание нового проекта с нуля</span>. Как уже упоминалось, рекомендуется создавать новые проекты на основе существующих демонстрационных проектов. Если по некоторым причинам это нежелательно, то новый проект можно создать, выполнив следующие шаги:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">1</span>. Создайте новый пустой файл проекта или makefile, используя Вашу выбранную среду проектирования (tool chain).<br /><span style=" font-weight:600;">2</span>. Добавьте файлы, описанные в таблице 21 в новый созданный проект или makefile.<br /><span style=" font-weight:600;">3</span>. Скопируйте имеющийся готовый файл FreeRTOSConfig.h в папку проекта.<br /><span style=" font-weight:600;">4</span>. Добавьте и директорию проекта, и папку FreeRTOS\Source\include в пути проекта, по которым компилятор будет искать заголовочные файлы.<br /><span style=" font-weight:600;">5</span>. Скопируйте настройки компилятора из соответствующих (похожих по используемой среде проектирования и архитектуре микроконтроллера) демо-проекта или makefile. В частности, каждый порт требует установки макроса, который проверяет корректное подключение файлов заголовка в сборке. Например, сборки, предназначенные для MegaAVR и использующие компилятор IAR, требуют определения макроса IAR_MEGA_AVR, и сборки для ARM Cortex M3, использующие компилятор GCC, требуют определения макроса GCC_ARMCM3. Эти определения используются в файле FreeRTOS\Source\include\portable.h, который может быть просмотрен, когда не очевидно - какое макроопределение надо использовать.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Таблица 21. Исходные файлы FreeRTOS для включения в проект</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td bgcolor="#0000ff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#ffffff;">Файл<br /></span></p></td>
<td bgcolor="#0000ff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#ffffff;">Размещение<br /></span></p></td></tr>
<tr>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">tasks.c</span></p></td>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">FreeRTOS\Source</span></p></td></tr>
<tr>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">queue.c</span></p></td>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">FreeRTOS\Source</span></p></td></tr>
<tr>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">list.c</span></p></td>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">FreeRTOS\Source</span></p></td></tr>
<tr>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">port.c</span></p></td>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">FreeRTOS\Source\portable\[compiler]\[architecture], где [compiler] - используемый набор средств проектирования (tool chain), и [architecture] - вариант используемого микроконтроллера.</span></p></td></tr>
<tr>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">port.x</span></p></td>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">Некоторые порты также требуют, чтобы к проекту был подключен файл ассемблера. Этот файл находится в той же папке, что и port.c. Расширение имени файла зависит от используемого tool chain, так что расширение .x должно быть заменено реальным расширением имени ассемблерного файла.</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Заголовочные файлы</span>. Файлы исходного кода, которые используют FreeRTOS API, должны подключить заголовочный файл FreeRTOS.h, содержащий прототипы используемых API функций - “task.h”, “queue.h” или “semphr.h”.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Дополнение 5: типы данных и руководство по стилю кодирования</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Типы данных</span>. Каждый порт FreeRTOS имеет уникальный файл заголовка portable.h, в котором определен набор макросов, который детально описывает используемые типы данных. Весь исходный код FreeRTOS и демо-приложения используют эти макроопределения, а не прямое использование типов данных C - однако нет никаких причин, чтобы приложения, которые используют FreeRTOS, должны делать то же самое. Разработчики приложения могут подставить реальные типы данных для каждого макроса, определенного в таблице 22.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Таблица 22. Типы данных, используемые FreeRTOS</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td bgcolor="#0000ff">
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#ffffff;">Макрос или typedef<br /></span></p></td>
<td bgcolor="#0000ff">
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#ffffff;">Действительный используемый тип<br /></span></p></td></tr>
<tr>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">portCHAR</span></p></td>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">char</span></p></td></tr>
<tr>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">portSHORT</span></p></td>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">short</span></p></td></tr>
<tr>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">portLONG</span></p></td>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">long</span></p></td></tr>
<tr>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">portTickType</span></p></td>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">Используется для сохранения счетчика тиков и указания времени блокировки.</span><br />portTickType может быть либо беззнаковым (unsigned) 16-битным чипом, либо беззнаковым 32-битным, в зависимости от установки configUSE_16_BIT_TICKS в файле FreeRTOSConfig.h.<br />Использование 16-битного типа может значительно повысить эффективность кода для 8 и 16 разрядных архитектур микроконтроллеров, но при этом накладываются некоторые ограничения на диапазон времени блокировки, который можно задать. Нет смысла использовать 16-битный тип для 32-битных архитектур.</p></td></tr>
<tr>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">portBASE_TYPE</span></p></td>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">Здесь определен самый эффективный тип для архитектуры микроконтроллера. Обычно это должен быть 32-битный тип для 32-разрядной архитектуры, 16-битный для 16-разрядной и соответственно 8-битный тип для 8-разрядной.</span><br />portBASE_TYPE используется главным образом для возвращаемых типов, которые могут иметь очень ограниченный диапазон, и для двоичного типа (bool).</p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Некоторые компиляторы считают char с не указанным знаком как unsigned (без знака), тогда как другие компиляторы - как signed (со знаком). По этой причине исходный код FreeRTOS явно указывает каждое использование portCHAR либо как signed, либо как unsigned.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Тип int не используется никогда - только long и short.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Имена переменных</span>. Имена переменных имеют префикс, соответствующий их типу. Префикс 'c' применяется для char, 's' для short, 'l' для long и 'x' для portBASE_TYPE и любого другого типа (структуры, хендлы задач, хендлы очередей и т. п.).</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если переменная беззнаковая (unsigned), она также имеет префикс 'u'. Если переменная является указателем, то она имеет префикс 'p'. Таким образом, переменная типа unsigned char будет иметь префикс 'uc', и переменная типа указателя на char будет иметь префикс 'pc'.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Имена функций</span>. Функции имеют префикс для того же типа данных, который они возвращают. Префикс также включает в себя признак имени файла, где функция определена. Например:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">· vTaskPrioritySet() возвращает void и определена в файле task.c.<br />· xQueueReceive() возвращает переменную типа portBASE_TYPE, и определена в файле queue.c.<br />· vSemaphoreCreateBinary() возвращает void и определена в файле semphr.h.</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Файлы, действующие в пределах одного файла (private) имеют префикс 'prv'.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Форматирование</span>. 1 таб (символ табуляции с ASCII кодом 09h) соответствует 4 символам пробела.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Имена макросов</span>. Большинство макросов написаны заглавными буквами, и имеют префикс из маленьких букв, который показывает, где определен макрос. В таблице 23 предоставлен список префиксов.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Таблица 23. Префиксы макросов</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td bgcolor="#0000ff">
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#ffffff;">Префикс<br /></span></p></td>
<td bgcolor="#0000ff">
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#ffffff;">Размещение определения макроса<br /></span></p></td></tr>
<tr>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">port (например, portMAX_DELAY)</span></p></td>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">portable.h</span></p></td></tr>
<tr>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">task (например, taskENTER_CRITICAL())</span></p></td>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">task.h</span></p></td></tr>
<tr>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">pd (например, pdTRUE)</span></p></td>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">projdefs.h</span></p></td></tr>
<tr>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">config (например, configUSE_PREEMPTION)</span></p></td>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">FreeRTOSConfig.h</span></p></td></tr>
<tr>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">err (например, errQUEUE_FULL)</span></p></td>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">projdefs.h</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Имейте в виду, что API семафоров написано почти полностью как набор макросов, однако оно следует стилю именования функций, а не стилю именования макросов.</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Макросы, определенные в таблице 24, используются повсюду в исходном коде FreeRTOS.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Таблица 24. Общие макроопределения</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td bgcolor="#0000ff">
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#ffffff;">Макрос<br /></span></p></td>
<td bgcolor="#0000ff">
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#ffffff;">Значение<br /></span></p></td></tr>
<tr>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">pdTRUE</span></p></td>
<td bgcolor="#ccffff">
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">1</span></p></td></tr>
<tr>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">pdFALSE</span></p></td>
<td bgcolor="#ccffff">
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">0</span></p></td></tr>
<tr>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">pdPASS</span></p></td>
<td bgcolor="#ccffff">
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">1</span></p></td></tr>
<tr>
<td bgcolor="#ccffff">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">pdFAIL</span></p></td>
<td bgcolor="#ccffff">
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ccffff;">0</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Рациональность излишних преобразований типов (type casting)</span>. Исходный код FreeRTOS может быть скомпилирован несколькими разными компиляторами, каждый из который имеет свои причуды - как и когда генерировать предупреждения. В частности, разные компиляторы хотят видеть приведение типов, реализованное разными способами. В результате исходный код FreeRTOS содержит больше приведений, чем обычно необходимо.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Словарь</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">atomic</span>, <span style=" font-weight:600;">атомарная операция</span> относится к такому действию, которое в многозадачной среде, если будет запущено, то обязательно завершится с успехом, и никакой посторонний код не может на повлиять на результат выполнения операции. Примером атомарной операции может служить любая элементарная команда на языке ассемблера - к примеру, инкремент 8-битного регистра на 8-битном процессоре. Если же на этом же процессоре мы попытаемся выполнить операцию по инкременту 32-битной переменной, то эта операция не всегда может считаться атомарной, так как её теоретически может прервать любой другой процесс, и повлиять на результат операции. Этим другим процессом может быть, к примеру, некорректно написанное прерывание. Чтобы добиться атомарности и этой операции - в нашем примере инкремент 32-битной переменной на 8-битной машине - то нужно обеспечить запрет любых посторонних действий на время выполнения операции (например, это может быть запрет прерывания в начале операции и разрешение прерываний по завершению операции).</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">callback</span>, <span style=" font-weight:600;">функция обратного вызова</span> специально предусмотренная в коде функция, тело которой может предоставить пользователь. Предназначена для пользовательской модификации стандартного функционала чего-либо, например для обработки пользователем каких-то событий FreeRTOS. Обычно то же самое, что и хук (hook).</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">deferred</span> отложенное выполнение (прерывания).</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">embedded</span> встраиваемая система (электронная система с применением микроконтроллера).</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">GATEKEEPER</span>, <span style=" font-weight:600;">гейткипер</span> привратник - специальная задача, которая имеет монопольный доступ к какому-то ресурсу (например, порт ввода/вывода или UART). Гейткипер применяется для устранения конфликтов совместного доступа разными задачами к одному и тому же ресурсу.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">HWM</span> high water mark величина, до которой наросло использование стека (по аналогии с ватерлинией - до какой самой верхней отметки корпуса дошла вода при загрузке корабля).</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Idle</span> ожидание.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Idle task</span> специальная задача ожидания, которая всегда автоматически запускается в системе FreeRTOS. Имеет минимальный приоритет и несет специальные функции - она нужна для вытеснения другими задачами и для уборки мусора при удалении задач.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">ISR</span>, <span style=" font-weight:600;">Interrupt Service Routine</span> подпрограмма обработчика прерывания.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">LCD</span> ЖКИ, жидкокристаллический дисплей.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">mutex</span>, <span style=" font-weight:600;">мьютекс</span> специальный объект, помогающий при многозадачности реализовать взаимное исключение выполнения задач, что важно для исключения одновременного доступа к общему ресурсу (слово mutex образовалось как сокращение от mutual exclusion)</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">mutual exclusion</span> взаимное исключение - термин, касающийся атомарных операций с ресурсами памяти.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Not Running</span> не запущено - состояние задачи, когда она находится в неактивном состоянии (не выполняется). Состояние Not Running имеет подсостояния Blocked, Ready, Suspended.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">pre-emption</span>, <span style=" font-weight:600;">вытеснение</span> механизм поддержки приоритета выполнения, когда одна задача (с более высоким приоритетом) принудительно запускается, останавливая (вытесняя) другую задачу (с более низким приоритетом).</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">recurrent</span>, <span style=" font-weight:600;">рекуррентная функция</span> - функция, которая может вызвать саму себя (почти) неограниченное количество раз для проведения каких-то вычислений. Хорошим примером рекуррентности могут служить действия по автоматизированному просмотру/поиску вложенных папок и файлов на диске.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">reentrant</span>, <span style=" font-weight:600;">реентрантная функция</span> термин относится к многозадачной среде выполнения, и применяется к функциям и подпрограммам. Функция или подпрограмма считается реентрантной, если она написана так, что если выполнение функции будет остановлено в любом месте (например, при прерывании или переключении контекста), и функция будет вызвана заново (сначала) уже в новом контексте, то это никак не повлияет на успешную работу функции. Т. е. функция всегда успешно завершит свою работу, будучи одновременно запущенной и/или приостановленной в разных контекстах. К реентерабельным нельзя отнести такие функции и подпрограммы, которые обращаются к глобальным переменным или имеют в своем теле статические переменные.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Running</span> запущено - состояние задачи, когда она находится в активном состоянии (выполняется).</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">scheduling</span>, <span style=" font-weight:600;">шедулинг</span> механизм управления задачами - смена состояния задач, переключение между задачами с целью организации их совместного выполнения.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">sheduler</span>, <span style=" font-weight:600;">шедулер</span> специальный код RTOS, который занимается перелючением контекста. Это означает, что в момент каждого тика системы RTOS шедулер принимает решение, какой задаче передать процессорное время. Шедулер работает по алгоритму, учитывающему приоритеты задач.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Task</span> задача.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">TCB</span> task control block - блок управления задачей. Специальная структура в памяти, хранящая данные задачи.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">tick</span>, <span style=" font-weight:600;">тик</span> элементарный интервал (квант) времени, который определяет скорость реакции RTOS на различные события. Типичная длительность тика может составлять от 0.1 до 15 мс, в зависимости от требований приложения RTOS и мощности используемого процессора (или микроконтроллера). На каждом тике запускается планировщик RTOS, и в этот момент может произойти переключение контекста выполнения на другую задачу.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">детерминированный</span> (процесс, подпрограмма, алгоритм) означает, что время выполнения этого процесса (подпрограммы, алгоритма) остается неизменным от вызова к вызову.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">исключение</span> обычно специальное прерывание, которое срабатывает при ошибке выполнения кода микроконтроллером (например, недопустимая команда, переполнение стека или нарушение защиты памяти).</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">контекст</span> (выполнения) место в коде, который выполняется микроконтроллером. Например, микроконтроллер выполняет задачу A, тогда говорят, что сейчас имеет место контекст задачи A. Если микроконтроллер сейчас обрабатывает прерывание (работает код ISR), то говорят, что сейчас активен контекст прерывания, или контекст ISR. Часто под контекстом также подразумевают состояние регистров микроконтроллера, сохраненное в стеке.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">куча</span>, <span style=" font-weight:600;">heap</span> пул (блок) свободной памяти, предназначенный для динамического выделения (т. е. во время выполнения приложения) под различные нужды приложения пользователя (в том числе и под нужды FreeRTOS).</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">порт FreeRTOS</span> версия FreeRTOS, написанная и оптимизированная для какого-то специфичного микроконтроллера или семейства микроконтроллеров (учитывающая особенности архитектуры выбранного микроконтроллера). Например, может быть порт FreeRTOS для Atmel ARM7 или порт FreeRTOS для Analog Devices BlackFin DSP.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">токен</span> билетик, флажок, означающий что-то.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">переключение контекста</span> переключение между задачами, т. е. переключение работы микроконтроллера с одной задачи на другую. Переключение контекста является основной задачей ядра FreeRTOS, и выполняется планировщиком (шедулером).</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">планировщик</span> специальный код, который занимается переключением контекста (то же самое, что и шедулер).</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">цель</span>, <span style=" font-weight:600;">target</span> имеется в виду среда исполнения приложения FreeRTOS - либо DOS, либо микроконтроллер.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">хук</span>, <span style=" font-weight:600;">hook</span> (переводится как крючок) привязка к какому то событию, например к началу выполнения задачи. Обычно то же самое, что и callback.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-style:italic;"><br /></p></body></html>