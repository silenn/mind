<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/#define F_CPU 8000000L</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">#</span><span style=" font-family:'Courier New'; color:#6a1009;">define LED_Indicator_DDR	DDRB</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">#</span><span style=" font-family:'Courier New'; color:#6a1009;">define LED_Indicator_PORT	PORTB</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">#</span><span style=" font-family:'Courier New'; color:#6a1009;">define LED_Indicator		0	//LED RX and TX UART indication</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">#</span><span style=" font-family:'Courier New'; color:#6a1009;">define DS_DDR				DDRB</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">#</span><span style=" font-family:'Courier New'; color:#6a1009;">define DS_PORT				PORTB</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">#</span><span style=" font-family:'Courier New'; color:#6a1009;">define DS					1	//DS18b20 pin</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">#</span><span style=" font-family:'Courier New'; color:#6a1009;">define DS_Low				DS_DDR &amp;= ~(1&lt;&lt;DS)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">#</span><span style=" font-family:'Courier New'; color:#6a1009;">define DS_High				DS_DDR |= 1&lt;&lt;DS</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">#</span><span style=" font-family:'Courier New'; color:#6a1009;">include &lt;avr/io.h&gt;		//input-output ports library</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">#</span><span style=" font-family:'Courier New'; color:#6a1009;">include &lt;avr/interrupt.h&gt;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">u</span><span style=" font-family:'Courier New'; color:#6a1009;">nsigned char TCNT;			//timer counter</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/unsigned char pause;		//for pause of LED_Indicator blinking</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">u</span><span style=" font-family:'Courier New'; color:#6a1009;">nsigned char Counter;		//for more longer pause</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">u</span><span style=" font-family:'Courier New'; color:#6a1009;">nsigned int UART_R_data;	//UART received data</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">u</span><span style=" font-family:'Courier New'; color:#6a1009;">nsigned int UART_T_data;	//UART data for transmission</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/====================</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/	INTERNAL INT SECTION</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/====================</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">//UDR empty</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">UART_R_data = 0;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">UCSRB &amp;= ~(1&lt;&lt;UDRIE);	//UDRIE disable</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">I</span><span style=" font-family:'Courier New'; color:#6a1009;">SR(TIMER0_OVF_vect)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">//For LED_Indicator blinking</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">//It will blink if UART sends or receives data packet</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">TCNT++;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">if (TCNT &gt; 0x10 /*&amp;&amp; Blink_count &gt;&gt; 0*/)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">	TCNT = 0;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">	Counter = 1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/====================</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/	FUNCTION SECTION</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/====================</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/byte sending function:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">v</span><span style=" font-family:'Courier New'; color:#6a1009;">oid send_UART(unsigned int x)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">//&quot;while ( !(UCSRA &amp; (1&lt;&lt;UDRE)) )&quot; - taken from datasheet (USART - Data transmission)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">while ( !(UCSRA &amp; (1&lt;&lt;UDRE)) )	//waiting while we have data to transmit</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">{}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">UDR = x;			//send data to UDR after UDRE==1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">v</span><span style=" font-family:'Courier New'; color:#6a1009;">oid send_str_UART(unsigned char *s)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">//send_str_UART(&quot;Hello world&quot;)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">while (*s != 0)	send_UART(*s++);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/byte receiving function:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">u</span><span style=" font-family:'Courier New'; color:#6a1009;">nsigned receiv_UART(void)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">//&quot;while ( !(UCSRA &amp; (1&lt;&lt;RXC)) )&quot; - taken from datasheet (USART - Data transmission)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">while ( !(UCSRA &amp; (1&lt;&lt;RXC)) )	//waiting while receiving isn't ended</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">{}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">return UDR;			//return UDR after RXC==1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/====================</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/	MAIN SECTION</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/====================</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">v</span><span style=" font-family:'Courier New'; color:#6a1009;">oid main(void)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">{</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/====================</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/	HARDWARE INIT SECTION</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/====================</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><a name="code"></a><span style=" font-family:'Courier New,courier'; font-size:11pt;">/</span><span style=" font-family:'Courier New,courier'; font-size:11pt;">/Timer0_START</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">	TCCR0 = (TCCR0 | 1&lt;&lt;CS00) | (TCCR0 | 0&lt;&lt;CS01) | (TCCR0 | 1&lt;&lt;CS02); //Prescaler x1024</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">	TIMSK |= 1&lt;&lt;TOIE0; //Enable TIMER0 interrupts</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">	//Timer0_END</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:11pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">	//UART_init_START</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">	UBRRH = 0;	//UBBR = f/(16*band)-1; f=8000000 Hz, band=9600</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">	UBRRL = 51; //Normal dual asynchronous mode</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:11pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">	UCSRA = 0x00;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	RXC			- receive ending</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	|TXC		- transmit ending</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	||UDRE		- no data to transmit</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	|||FE		- frame error</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	||||DOR		- buffer overflow error</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	|||||PE		- parity error</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	||||||U2X	- dual speed</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	|||||||MPCM	- multiprocessor mode</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	76543210</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	00000000	- UCSRA</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:11pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">	UCSRB = (UCSRB | 1&lt;&lt;RXEN) | (UCSRB | 1&lt;&lt;TXEN); //TX and RX enable</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">	UCSRB = (UCSRB | 1&lt;&lt;RXCIE); //TX and RX interrupts enable</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	RXCIE		- interrupt after receiving data</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	|TXCIE		- interrupt after transmitting data</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	||UDRIE		- interrupt after no data to transmit</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	|||RXEN		- enable receive</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	||||TXEN	- enable transmit</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	|||||UCSZ2	- UCSZ0..2 size of data frame</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	||||||RXB8	- 9 bits of received data</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	|||||||TXB8	- 9 bits of transmitted data</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	76543210</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	11011000	- UCSRB</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:11pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">	UCSRC = (UCSRC | 1&lt;&lt;URSEL) | (UCSRC | 1&lt;&lt;UCSZ0) | (UCSRC | 1&lt;&lt;UCSZ1);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	URSEL		- always 1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	|UMSEL		- 0 - asynchronous, 1 - synchronous</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	||UPM1		- UPM0..1 - parity</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	|||UPM0		- UPM0..1 - parity</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	||||USBS	- stop-bits: 0 - 1, 1 - 2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	|||||UCSZ1	- UCSZ0..2 size of data frame</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	||||||UCSZ0	- UCSZ0..2 size of data frame</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	|||||||UCPOL- clocking only for synchronous mode</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	76543210</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">		//	10000110	- UCSRC</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:11pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">	//UDR - register for reading and writing data</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">	//UART_init_END</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:11pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">	LED_Indicator_DDR |= 1 &lt;&lt;LED_Indicator;		//set DDRB 0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">//	LED_Indicator_PORT |= 1 &lt;&lt;LED_Indicator;		//set PORTB 0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">	DS_DDR &amp;= ~(1 &lt;&lt;DS);		//clr DDRB 1</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:11pt;">	DS_PORT &amp;= ~(1 &lt;&lt;DS);		//clr PORTB 1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/====================</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/	VARIABLE SECTION</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/====================</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">UART_R_data = 0x00;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">Counter = 0x00;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">TCNT = 0x00;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">sei();</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/====================</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/	MAIN LOOP CYCLE</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">/</span><span style=" font-family:'Courier New'; color:#6a1009;">/====================</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">while(1)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">{</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">	if(UART_R_data != 0)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">	{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">		LED_Indicator_PORT ^= 1 &lt;&lt;LED_Indicator;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">		send_UART(UART_R_data);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">		UCSRB |= 1&lt;&lt;UDRIE;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">	}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">	</span><span style=" font-family:'Courier New'; color:#6a1009;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="code"></a><span style=" font-family:'Courier New'; color:#6a1009;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; color:#6a1009;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:11pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:11pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:11pt;"><br /></p></body></html>